# ðŸš€ Rust File Backend (RFB) - Environment Configuration Sample

# --- Security ---
# CRITICAL: Set ALLOWED_ORIGINS to specific domains in production (e.g., https://yourapp.com).
# DO NOT use "*" in production. Multiple origins can be comma-separated.
# If unset, defaults to http://localhost:3000, http://localhost:5173.
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# JWT Secret - MUST BE SECURE (min 32 random chars)
JWT_SECRET=change_this_to_a_secure_random_string_in_production
JWT_EXPIRATION_HOURS=24

# --- Database ---
# PostgreSQL (Recommended for production)
DATABASE_URL=postgres://user:password@localhost:5432/rfb
# SQLite (Development only)
# DATABASE_URL=sqlite://data/rfb.db?mode=rwc

# --- S3 Storage (MinIO / AWS S3) ---
MINIO_ENDPOINT=http://localhost:9000
MINIO_BUCKET=file-storage
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_REGION=us-east-1
S3_PUBLIC_BASE_URL=/obj


# --- Upload Configuration ---
# Maximum file size in bytes (Default: 1GB)
MAX_FILE_SIZE=1073741824
# Chunk size for multipart uploads (Default: 10MB)
CHUNK_SIZE=10485760
# Rate limit for uploads per hour per user
UPLOADS_PER_HOUR=250
# Staging file cleanup age in hours
STAGING_CLEANUP_AGE_HOURS=24

# --- Virus Scanning (ClamAV) ---
ENABLE_VIRUS_SCAN=true
VIRUS_SCANNER_TYPE=clamav
CLAMAV_HOST=localhost
CLAMAV_PORT=3310

# --- OIDC Authentication (Optional) ---
# OIDC_ISSUER_URL=https://accounts.google.com
# OIDC_CLIENT_ID=your-client-id
# OIDC_CLIENT_SECRET=your-client-secret
# OIDC_REDIRECT_URL=http://localhost:3000/auth/oidc/callback
# OIDC_SKIP_DISCOVERY=false

# --- Server ---
HOST=0.0.0.0
PORT=3000
WORKERS=4
RUST_LOG=info,rust_file_backend=debug,tower_http=info
