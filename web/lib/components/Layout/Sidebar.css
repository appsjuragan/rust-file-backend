@layer utilities {

    /* Sidebar */
    .rfm-sidebar {
        @apply w-80 bg-stone-100 border-r border-stone-200 flex flex-col overflow-y-auto select-none dark:bg-slate-900 dark:border-slate-800 transition-all duration-300 ease-in-out;
    }

    .rfm-sidebar.is-hidden {
        @apply w-0 border-r-0 opacity-0 pointer-events-none;
    }

    /* Mobile Sidebar Drawer */
    @media (max-width: 768px) {
        .rfm-sidebar {
            @apply fixed inset-y-0 left-0 z-[6000] w-80 shadow-2xl translate-x-0 opacity-100 border-r-0;
            background-color: rgb(245, 245, 244);
            backdrop-filter: blur(10px);
        }

        .dark .rfm-sidebar {
            background-color: rgb(15, 23, 42);
        }

        .rfm-sidebar.is-hidden {
            @apply -translate-x-full opacity-0 w-80 shadow-none;
        }
    }

    .rfm-sidebar-list {
        @apply flex flex-col py-2 px-1;
    }

    .rfm-sidebar-header {
        @apply flex items-center gap-3 px-6 py-2.5 border-b border-stone-200 dark:border-slate-800 bg-white dark:bg-slate-900 sticky top-0 z-20;
    }

    .rfm-app-logo {
        @apply w-8 h-8 rounded-xl bg-teal-600 flex items-center justify-center shadow-lg shadow-teal-500/20 text-white p-1.5;
    }

    .rfm-app-logo-icon {
        @apply w-full h-full;
    }

    .rfm-app-title {
        @apply flex flex-col font-black leading-none tracking-tight;
    }

    .rfm-app-title-main {
        @apply text-base text-stone-900 dark:text-white uppercase;
    }

    .rfm-app-title-sub {
        @apply text-base text-teal-600 dark:text-sky-400 -mt-0.5 uppercase;
    }

    @media (max-width: 768px) {
        .rfm-sidebar-list {
            @apply pt-4;
        }

        .rfm-sidebar-header {
            @apply h-auto py-2.5 mb-2;
        }
    }

    .rfm-sidebar-item {
        @apply flex items-center gap-2 px-2 py-2.5 rounded-xl cursor-pointer transition-all duration-200 text-stone-600 font-semibold mb-1 border border-transparent;
    }

    .rfm-sidebar-chevron {
        @apply w-4 h-4 flex items-center justify-center flex-shrink-0 rounded transition-colors;
    }

    .rfm-sidebar-chevron:hover {
        @apply bg-stone-200 dark:bg-slate-700;
    }

    .rfm-chevron-icon {
        @apply w-3 h-3 text-stone-400 dark:text-slate-500;
    }

    .rfm-chevron-spacer {
        @apply pointer-events-none;
    }

    .rfm-sidebar-item:hover {
        @apply bg-stone-50 shadow-sm text-stone-900 border border-stone-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700;
    }

    .rfm-sidebar-item.active {
        @apply bg-stone-50 shadow-sm text-teal-700 border border-stone-200 dark:bg-slate-800 dark:text-sky-400 dark:border-slate-700;
    }

    .rfm-sidebar-icon {
        @apply w-5 h-5 flex-shrink-0;
    }

    .rfm-sidebar-item-text {
        @apply truncate flex-1;
    }

    .rfm-sidebar-indent {
        @apply ml-4 border-l border-stone-200/60 dark:border-slate-800 pl-1;
    }

    /* Storage Statistics (Sidebar Facts) */
    .rfm-sidebar-facts {
        @apply mt-auto border-t border-stone-200 dark:border-slate-800 transition-all duration-300;
    }

    .rfm-facts-header {
        @apply px-4 py-2 flex items-center justify-between cursor-pointer hover:bg-stone-200 dark:hover:bg-slate-800 transition-colors h-11;
    }

    .rfm-facts-title {
        @apply text-[10px] font-bold text-stone-500 dark:text-slate-400 uppercase tracking-widest flex items-center gap-2;
    }

    .rfm-facts-toggle-btn {
        @apply w-6 h-6 flex items-center justify-center rounded-lg bg-stone-200 dark:bg-slate-700 text-stone-600 dark:text-slate-300 hover:bg-stone-300 dark:hover:bg-slate-600 transition-all shadow-sm;
    }

    .rfm-facts-container {
        @apply p-4 pt-0 transition-all duration-300 overflow-hidden;
    }

    .rfm-facts-minimized-info {
        @apply px-4 pb-3 text-[11px] font-semibold text-teal-700 dark:text-sky-400 cursor-pointer;
    }

    .rfm-sidebar-facts.minimized {
        @apply mt-auto;
    }

    .rfm-facts-content {
        @apply mb-4;
    }

    .rfm-fact-item {
        @apply text-[13px] font-bold text-stone-800 dark:text-slate-100 mb-0.5;
    }

    .rfm-fact-category-list {
        @apply mt-2 grid grid-cols-1 gap-1;
    }

    .rfm-fact-sub-item {
        @apply flex items-center gap-2 text-[11px] text-stone-500 dark:text-slate-400 py-0.5 px-2 rounded-md transition-all;
    }

    .rfm-fact-sub-item.highlighted {
        @apply bg-stone-200 dark:bg-slate-800 text-stone-900 dark:text-slate-200;
    }

    .rfm-fact-sub-item .dot {
        @apply w-1.5 h-1.5 rounded-full;
    }

    .rfm-facts-pie-container {
        @apply w-24 h-24 flex-shrink-0 relative flex items-center justify-center;
    }

    .rfm-facts-pie-svg {
        @apply w-full h-full transform -rotate-90;
    }

    .rfm-pie-segment {
        @apply transition-all duration-300 cursor-pointer origin-center;
        stroke: white;
        stroke-width: 0.5;
    }

    .dark .rfm-pie-segment {
        stroke: #0f172a;
    }

    .rfm-pie-segment.active {
        @apply opacity-90;
        transform: scale(1.05);
    }

    .rfm-pie-percentage {
        @apply fill-stone-900 dark:fill-white font-extrabold text-[9px] pointer-events-none;
        /* Rotate back because the SVG is rotated -90deg */
        transform: rotate(90deg);
        transform-origin: center;
    }

    .rfm-pie-label {
        @apply fill-stone-500 dark:fill-slate-400 font-medium text-[8px] pointer-events-none;
        transform: rotate(90deg);
        transform-origin: center;
    }

    .rfm-facts-pie-empty {
        @apply w-full h-full rounded-full bg-stone-200 dark:bg-slate-800 border-2 border-dashed border-stone-300 dark:border-slate-700;
    }
}