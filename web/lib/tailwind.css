@import url('https://fonts.googleapis.com/css2?family=Amarna:ital,wght@0,100..700;1,100..700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    font-family: 'Amarna', Arial, sans-serif;
  }
}

@layer utilities {

  /* CommonModal */
  .rfm-modal-centered-wrapper {
    @apply absolute inset-0 flex items-center justify-center pointer-events-none z-[999];
  }

  .rfm-modal--centered {
    @apply relative top-auto left-auto pointer-events-auto;
  }

  .rfm-modal-container {
    @apply absolute rounded-2xl bg-white z-[999] border border-slate-200 top-[10%] left-[10%] w-[450px] h-[350px] flex flex-col overflow-hidden dark:bg-slate-900 dark:border-slate-800;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    resize: both;
  }

  /* Specific sizing for different modal types */
  .rfm-preview-modal {
    @apply w-[800px] h-[600px] max-w-[90vw] max-h-[85vh];
  }

  .rfm-metadata-modal {
    @apply w-[500px] h-auto;
  }

  .rfm-modal-container::after {
    content: "";
    @apply absolute bottom-1 right-1 w-3 h-3 border-r-2 border-b-2 border-slate-300 rounded-br-sm pointer-events-none;
  }

  .rfm-modal-header {
    @apply flex items-center justify-between px-4 py-2.5 cursor-grab active:cursor-grabbing;
    background: linear-gradient(180deg, #334155 0%, #0f172a 100%);
    border-bottom: 1px solid rgba(0, 0, 0, 0.3);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  .rfm-modal-title {
    @apply text-[11px] font-bold text-white/90 truncate pr-4 flex-1 uppercase tracking-[0.2em] antialiased;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
  }

  .rfm-modal-body {
    @apply flex flex-col flex-1 min-h-0 p-5 overflow-hidden;
  }

  .rfm-modal-icon {
    @apply w-6 h-6 p-1 flex items-center justify-center text-white cursor-pointer transition-all duration-200 rounded-md;
    opacity: 1 !important;
  }

  .rfm-modal-icon svg {
    @apply w-full h-full;
    fill: white !important;
  }

  .rfm-modal-icon:hover {
    @apply bg-rose-500 text-white rotate-90 !important;
    opacity: 1 !important;
  }

  /* FileIcon */
  .rfm-file-icon-container {
    @apply relative flex flex-col justify-center items-center overflow-hidden cursor-pointer transition-all duration-300 p-2 rounded-xl dark:hover:bg-gray-700/50;
  }

  .rfm-file-icon-svg {
    @apply w-20 h-20 mb-2;
  }

  .rfm-file-icon-extension {
    @apply absolute top-[42px] text-[10px] font-bold text-white select-none pointer-events-none uppercase;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  }

  .rfm-file-icon-name {
    @apply w-full text-xs text-center text-ellipsis overflow-hidden whitespace-nowrap px-1 select-none font-medium;
  }

  /* Content header */
  .rfm-workspace-header {
    @apply w-full flex gap-4 justify-between items-center mb-4 shrink-0;
  }

  .rfm-header-container {
    @apply flex justify-center items-center gap-2 rounded-lg bg-gray-200 dark:bg-gray-600 p-0.5;
  }

  .rfm-header-icon {
    @apply w-6 h-6 transition-all duration-200 cursor-pointer p-0.5;
  }

  .rfm-header-icon--selected {
    @apply bg-slate-700 dark:bg-sky-500 text-white rounded-md;
  }

  .rfm-workspace-list-align-txt {
    @apply text-left last:text-right px-4 py-1.5;
  }

  .rfm-workspace-list-th {
    @apply rfm-workspace-list-align-txt sticky top-0 bg-white z-10 dark:bg-gray-800 border-b border-slate-200 dark:border-gray-700 whitespace-nowrap;
  }

  .rfm-workspace-list-th-content {
    @apply flex items-center gap-1;
  }

  .rfm-workspace-list-th:last-child .rfm-workspace-list-th-content {
    @apply justify-end;
  }

  .rfm-header-sort-icon {
    @apply w-4 h-4;
  }

  .rfm-workspace-list-icon-row {
    @apply cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 active:bg-gray-200 transition-all duration-200 select-none;
  }

  .rfm-workspace-list-icon-td {
    @apply flex gap-3 py-1.5 items-center;
  }

  .rfm-workspace-list-icon {
    @apply w-5 h-5;
  }

  .rfm-workspace-list-add-folder {
    @apply w-full p-1 text-slate-100 rounded-lg bg-sky-500 hover:bg-sky-700 transition-all duration-200 cursor-pointer;
  }

  .rfm-workspace-actions {
    @apply flex gap-4 mt-8;
  }

  .rfm-btn-primary {
    @apply px-3 py-1 text-white rounded-lg bg-sky-500 hover:bg-sky-700 transition-all duration-200 cursor-pointer font-medium;
  }

  .rfm-folder-path-container {
    @apply flex gap-4 items-center min-w-0;
  }

  .rfm-folder-path-svg {
    @apply w-8 h-8 flex items-center justify-center fill-white bg-slate-400 p-1.5 rounded-full cursor-pointer transition-colors duration-200 hover:bg-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 shrink-0;
  }

  .rfm-folder-path-svg svg {
    @apply w-full h-full;
  }

  /* Breadcrumbs */
  .rfm-breadcrumbs {
    @apply flex items-center gap-2 text-sm text-slate-600 font-medium;
  }

  .rfm-breadcrumb-item {
    @apply flex items-center cursor-pointer hover:text-sky-600 transition-colors duration-200 dark:text-slate-400 dark:hover:text-sky-400;
  }

  .rfm-breadcrumb-item.active {
    @apply text-slate-900 font-bold cursor-default dark:text-slate-100;
  }

  .rfm-breadcrumb-separator {
    @apply text-slate-300 select-none dark:text-slate-600;
  }

  /* Navbar (Legacy) */
  .rfm-navbar {
    @apply bg-gray-200 dark:bg-gray-900 w-1/6 py-2 select-none;
  }

  .rfm-navbar-root-link {
    @apply uppercase text-lg text-gray-500 dark:text-gray-300 transition-colors duration-200 hover:text-gray-700 active:text-gray-900 font-semibold p-2 cursor-pointer;
  }

  .rfm-navbar-list {
    @apply mt-4;
  }

  .rfm-navbar-list-element {
    @apply text-gray-700 dark:text-slate-100 dark:hover:bg-gray-700 w-full transition-colors duration-200 px-2 py-1 hover:bg-gray-300 cursor-pointer active:bg-gray-400;
  }

  /* NewFolderIcon */
  .rfm-folder-icon-container {
    @apply border-dashed border-[3px] border-slate-300 w-20 h-20 flex flex-col justify-center items-center rounded-lg cursor-pointer transition-colors hover:border-sky-400 hover:bg-sky-50 dark:border-slate-700 dark:hover:border-sky-600 dark:hover:bg-slate-800;
  }

  .rfm-folder-icon-span {
    @apply text-slate-300 text-3xl select-none font-light;
  }

  /* NewFolderModal */
  .rfm-new-folder-modal-form {
    @apply flex flex-col gap-4;
  }

  .rfm-new-folder-modal-input {
    @apply bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-sky-500 focus:border-sky-500 block w-full px-3 py-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:focus:ring-sky-500 dark:focus:border-sky-500;
  }

  .rfm-new-folder-modal-btn {
    @apply text-white bg-sky-600 hover:bg-sky-700 focus:ring-4 focus:outline-none focus:ring-sky-600 font-semibold rounded-lg text-sm w-full px-4 py-2.5 text-center transition-all;
  }

  /* UploadFileModal */
  .rfm-upload-file-modal-title {
    @apply text-base;
  }

  .rfm-upload-file-modal-container {
    @apply flex flex-row gap-4 justify-center items-center mt-4;
  }

  .rfm-upload-file-modal-btn {
    @apply text-white focus:ring-4 focus:outline-none font-medium rounded-lg text-sm w-full sm:w-auto px-2.5 py-1 text-center;
  }

  .rfm-upload-file-modal-btn-confirm {
    @apply bg-emerald-500 hover:bg-emerald-700 focus:ring-emerald-600;
  }

  .rfm-upload-file-modal-btn-cancel {
    @apply bg-rose-500 hover:bg-rose-700 focus:ring-rose-600;
  }

  /* Workspace */
  .rfm-workspace {
    @apply bg-white relative flex flex-col w-full h-full gap-4 p-3 transition-colors duration-200 dark:bg-gray-800 dark:text-slate-100;
    min-height: 400px;
  }

  .rfm-workspace.rfm-selecting {
    user-select: none !important;
  }

  .rfm-workspace-dropzone {
    @apply bg-sky-100;
  }

  .rfm-workspace-file-listing {
    @apply flex flex-col gap-4 flex-1 overflow-y-auto overflow-x-hidden;
    /* Custom scrollbar for better aesthetics */
    scrollbar-width: thin;
    scrollbar-color: var(--border) transparent;
  }

  .rfm-workspace-file-listing::-webkit-scrollbar {
    width: 6px;
  }

  .rfm-workspace-file-listing::-webkit-scrollbar-track {
    background: transparent;
  }

  .rfm-workspace-file-listing::-webkit-scrollbar-thumb {
    @apply bg-slate-300 dark:bg-slate-700 rounded-full;
  }

  .rfm-empty-folder {
    @apply flex items-center justify-center w-full py-10;
  }

  .rfm-empty-folder p {
    @apply px-6 py-2 bg-slate-50 border border-slate-200 rounded-lg text-slate-400 font-medium text-sm dark:bg-slate-800 dark:border-slate-700 dark:text-slate-500;
  }

  /* FileManager Layout */
  .rfm-main-container {
    @apply flex flex-col box-border h-full w-full;
  }

  .rfm-content-container {
    @apply flex flex-row flex-1 overflow-hidden;
  }

  /* Sidebar */
  .rfm-sidebar {
    @apply w-72 bg-slate-50 border-r border-slate-200 flex flex-col overflow-y-auto select-none dark:bg-slate-900 dark:border-slate-800;
  }

  .rfm-sidebar-list {
    @apply flex flex-col py-2 px-1;
  }

  .rfm-sidebar-item {
    @apply flex items-center gap-3 px-2 py-1 cursor-pointer transition-all duration-200 hover:bg-slate-200 rounded-lg my-0.5 dark:hover:bg-slate-800 border border-transparent;
  }

  .rfm-sidebar-item.active {
    @apply bg-white shadow-sm border border-slate-200 font-bold text-sky-600 dark:bg-slate-800 dark:border-slate-700 dark:text-sky-400;
  }

  .rfm-sidebar-item-text {
    @apply text-slate-700 text-sm dark:text-slate-300;
  }

  .rfm-sidebar-item.active .rfm-sidebar-item-text {
    @apply text-sky-600 dark:text-sky-400;
  }

  .rfm-sidebar-icon {
    @apply w-5 h-5;
  }

  .rfm-sidebar-header {
    @apply px-2 py-2 text-xs font-bold text-slate-500 uppercase tracking-wider;
  }

  .rfm-sidebar-tree {
    @apply flex flex-col;
  }

  .rfm-sidebar-tree-item {
    @apply relative flex flex-col;
  }

  .rfm-sidebar-indent {
    @apply ml-6 relative;
  }

  /* Vertical line for tree items - precisely centered under parent icon center */
  .rfm-sidebar-indent>.rfm-sidebar-tree-item::before {
    content: "";
    @apply absolute left-[-0.375rem] top-0 bottom-0 w-px bg-slate-200 dark:bg-slate-700;
  }

  /* Horizontal elbow line - connected exactly to child folder icon center */
  .rfm-sidebar-indent>.rfm-sidebar-tree-item::after {
    content: "";
    @apply absolute left-[-0.375rem] top-[0.875rem] w-[0.875rem] h-px bg-slate-200 dark:bg-slate-700;
  }

  /* Shorten vertical line for the last item in a group */
  .rfm-sidebar-indent>.rfm-sidebar-tree-item:last-child::before {
    @apply bottom-auto h-[0.875rem];
  }

  /* Preview */
  .rfm-preview-content {
    @apply mt-0 flex flex-1 items-center justify-center overflow-hidden bg-slate-100 dark:bg-slate-950 min-h-0 h-full p-4;
    height: 100% !important;
  }

  .rfm-preview-full {
    @apply p-0 items-stretch justify-stretch bg-transparent;
  }

  .rfm-metadata-modal {
    @apply w-[500px] h-auto max-h-[80vh];
  }

  .rfm-metadata-modal .rfm-modal-body {
    @apply overflow-y-auto;
  }

  .rfm-preview-image {
    @apply max-w-full max-h-full object-contain;
    width: auto;
    height: auto;
  }

  .rfm-preview-video {
    @apply max-w-full max-h-full;
    width: auto;
    height: auto;
  }

  .rfm-preview-audio {
    @apply w-full;
  }

  .rfm-preview-pdf {
    @apply w-full h-full border-none;
    height: 100% !important;
  }

  .rfm-preview-no-support {
    @apply p-4 text-slate-500 text-center;
  }

  /* Upload Toast */
  .rfm-upload-toast {
    @apply fixed bottom-6 right-6 w-80 bg-white rounded-xl shadow-2xl border border-slate-200 overflow-hidden z-[1000] transition-all duration-300 dark:bg-slate-900 dark:border-slate-800;
  }

  .rfm-upload-toast--minimized {
    @apply h-12;
  }

  .rfm-upload-toast-header {
    @apply flex items-center justify-between px-3 py-2 bg-slate-50 border-b border-slate-100 dark:bg-slate-800 dark:border-slate-700;
  }

  .rfm-upload-toast-title {
    @apply text-sm font-bold text-slate-800 truncate dark:text-slate-100;
  }

  .rfm-upload-toast-actions {
    @apply flex items-center gap-1.5;
  }

  .rfm-upload-toast-btn {
    @apply p-1 hover:bg-slate-200 rounded-lg transition-all duration-200 text-slate-600 dark:hover:bg-slate-700 dark:text-slate-300;
  }

  .rfm-upload-toast-body {
    @apply p-1 bg-white dark:bg-slate-900;
  }

  .rfm-upload-progress-container {
    @apply h-2 w-full bg-slate-100 rounded-full overflow-hidden mb-2 dark:bg-slate-800;
  }

  .rfm-upload-progress-bar {
    @apply h-full bg-sky-500 transition-all duration-300 ease-out;
  }

  .rfm-upload-progress-text {
    @apply text-xs font-bold text-slate-500 dark:text-slate-400;
  }

  /* Context Menu */
  .rfm-context-menu {
    @apply fixed bg-white border border-slate-200 rounded-lg z-[2000] py-0.5 min-w-[180px] overflow-hidden dark:bg-slate-900 dark:border-slate-800;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2), 0 10px 10px -5px rgba(0, 0, 0, 0.1), 0 0 15px rgba(0, 0, 0, 0.05);
  }

  .rfm-context-menu-item {
    @apply flex items-center gap-3 px-2 py-1 text-sm text-slate-700 cursor-pointer transition-colors duration-200 hover:bg-slate-100 active:bg-slate-200 dark:text-slate-300 dark:hover:bg-slate-800 dark:active:bg-slate-700;
  }

  .rfm-context-menu-icon {
    @apply w-4 h-4 fill-slate-500 dark:fill-slate-400;
  }

  .rfm-context-menu-item.disabled {
    @apply text-slate-400 cursor-default hover:bg-transparent;
  }

  /* Metadata Modal */
  .rfm-metadata-form {
    @apply flex flex-col gap-4 my-4 text-left min-w-[400px];
  }

  .rfm-form-group {
    @apply flex flex-col gap-1;
  }

  .rfm-form-group label {
    @apply text-xs font-bold text-slate-500 uppercase tracking-wider;
  }

  .rfm-form-group input {
    @apply bg-slate-50 border border-slate-200 text-slate-900 text-sm rounded-lg block w-full p-1 focus:ring-sky-500 focus:border-sky-500 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100;
  }

  .rfm-metadata-json {
    @apply bg-slate-900 text-sky-400 p-2 rounded-lg text-xs overflow-auto max-h-60 font-mono;
  }

  /* Virus Scanning States */
  .rfm-pending {
    opacity: 0.5;
    filter: grayscale(100%);
    pointer-events: none;
  }

  .rfm-scanning-badge {
    font-size: 10px;
    background-color: #fef3c7;
    color: #92400e;
    padding: 1px 3px;
    border-radius: 9999px;
    font-weight: bold;
    margin-left: 8px;
    display: inline-block;
  }

  .rfm-scanning-overlay {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(255, 255, 255, 0.5);
    @apply dark:bg-slate-900/50;
    font-size: 10px;
    font-weight: bold;
    color: #92400e;
    z-index: 10;
  }

  /* Multiple Upload Progress */
  .rfm-upload-list {
    @apply flex flex-col gap-1 max-h-60 overflow-y-auto mt-2;
  }

  .rfm-upload-item {
    @apply flex items-center justify-between gap-3 p-2 rounded-lg transition-colors hover:bg-slate-50 dark:hover:bg-slate-800;
  }

  .rfm-upload-item-info {
    @apply flex flex-col flex-1 min-w-0;
  }

  .rfm-upload-item-name {
    @apply text-xs font-medium text-slate-700 truncate dark:text-slate-300;
  }

  .rfm-upload-item-progress-container {
    @apply h-1 w-full bg-slate-100 rounded-full overflow-hidden mt-1 dark:bg-slate-700;
  }

  .rfm-upload-item-progress-bar {
    @apply h-full bg-indigo-500 transition-all duration-300 ease-out;
  }

  .rfm-upload-item-icon {
    @apply w-5 h-5 flex-shrink-0 flex items-center justify-center;
  }

  /* Selection and Marquee */
  .rfm-selected {
    @apply bg-sky-100 dark:bg-sky-900/40 ring-2 ring-sky-400 dark:ring-sky-600 !important;
  }

  .rfm-drag-over {
    @apply bg-indigo-100 dark:bg-indigo-900/40 ring-2 ring-indigo-500 !important;
    transform: scale(1.02);
  }

  .rfm-icons-grid {
    @apply grid gap-4 p-4 pt-0;
    grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
    padding-bottom: 2rem;
    /* Spacing for the bottom row */
  }

  .rfm-file-item {
    @apply relative transition-all duration-200 border border-transparent outline-none select-none;
  }

  .rfm-icons-grid .rfm-file-item {
    @apply flex flex-col items-center p-2 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-700/50;
  }

  .rfm-icons-grid .rfm-file-item.rfm-selected {
    @apply bg-sky-100 dark:bg-sky-900/40 border-sky-300 dark:border-sky-700 ring-2 ring-sky-400;
  }

  /* Fix for List View rows */
  .rfm-workspace-list-icon-row.rfm-selected {
    @apply bg-sky-50 dark:bg-sky-900/20 !important;
  }

  .rfm-marquee-selection {
    @apply fixed border border-sky-500 bg-sky-500/10 pointer-events-none z-[3000];
  }

  .rfm-operation-toast {
    @apply fixed bottom-8 left-1/2 -translate-x-1/2 bg-slate-900 text-white px-6 py-3 rounded-full shadow-2xl z-[5000] flex items-center border border-slate-700/50;
    animation: rfm-toast-in 0.3s ease-out;
  }

  .rfm-operation-toast-content {
    @apply flex items-center;
  }

  .rfm-spinner-small {
    @apply w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin;
  }

  @keyframes rfm-toast-in {
    from {
      transform: translate(-50%, 20px);
      opacity: 0;
    }

    to {
      transform: translate(-50%, 0);
      opacity: 1;
    }
  }

  /* Dialog Modal */
  .rfm-dialog-content {
    @apply flex flex-col gap-4;
  }

  .rfm-dialog-message {
    @apply text-sm text-slate-600 dark:text-slate-300 leading-relaxed;
  }

  .rfm-dialog-footer {
    @apply flex justify-end gap-3 mt-2;
  }

  /* Storage Statistics */
  .rfm-sidebar-facts {
    @apply mt-auto border-t border-slate-200 dark:border-slate-800 transition-all duration-300;
  }

  .rfm-facts-header {
    @apply px-4 py-2 flex items-center justify-between cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors h-11;
  }

  .rfm-facts-title {
    @apply text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider flex items-center;
  }

  .rfm-facts-toggle-btn {
    @apply w-6 h-6 flex items-center justify-center rounded-lg bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600 transition-all shadow-sm;
  }

  .rfm-facts-container {
    @apply p-4 pt-0 transition-all duration-300 overflow-hidden;
  }

  .rfm-facts-minimized-info {
    @apply px-4 pb-3 text-[11px] font-semibold text-sky-600 dark:text-sky-400 cursor-pointer;
  }

  .rfm-sidebar-facts.minimized {
    @apply mt-auto;
  }

  .rfm-facts-content {
    @apply mb-4;
  }
}