   Compiling rust-file-backend v1.0.9 (D:\projects\rust-file-backend\api)
warning: unused import: `IntoResponse`
  --> src\api\handlers\files.rs:10:16
   |
10 |     response::{IntoResponse, Response},
   |                ^^^^^^^^^^^^
   |
   = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default
System.Management.Automation.RemoteException
warning: unused import: `ReaderStream`
  --> src\api\handlers\files.rs:21:22
   |
21 | use tokio_util::io::{ReaderStream, StreamReader};
   |                      ^^^^^^^^^^^^
System.Management.Automation.RemoteException
warning: `rust-file-backend` (lib) generated 2 warnings (run `cargo fix --lib -p rust-file-backend` to apply 2 suggestions)
warning: unused import: `*`
 --> tests\api_integration_test.rs:7:47
  |
7 | use rust_file_backend::entities::{prelude::*, *};
  |                                               ^
  |
  = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default
System.Management.Automation.RemoteException
warning: `rust-file-backend` (test "api_integration_test") generated 1 warning (run `cargo fix --test "api_integration_test" -p rust-file-backend` to apply 1 suggestion)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 1m 13s
     Running tests\api_integration_test.rs (target\debug\deps\api_integration_test-80a7e5ff089107b4.exe)

running 1 test
[2m2026-02-20T03:34:49.958776Z[0m [32m INFO[0m [2mrust_file_backend::infrastructure::database[0m[2m:[0m ≡ƒöä Running SeaORM auto-migrations for SQLite/Other...
[2m2026-02-20T03:34:49.968191Z[0m [32m INFO[0m [2mrust_file_backend::infrastructure::seed[0m[2m:[0m ≡ƒî▒ Seeding validation data for SQLite...
[2m2026-02-20T03:34:49.978781Z[0m [32m INFO[0m [2mrust_file_backend::infrastructure::seed[0m[2m:[0m Γ£à SQLite validation seeding completed.
[2m2026-02-20T03:34:49.980131Z[0m [32m INFO[0m [2mrust_file_backend[0m[2m:[0m CORS configured for origins: ["http://localhost:3000", "http://localhost:5173", "http://127.0.0.1:3000"]
[2m2026-02-20T03:34:50.059254Z[0m [32m INFO[0m [2mrust_file_backend::services::file_service[0m[2m:[0m Starting streaming S3 upload for api_test.txt to staging/db8bb868-526b-4e4e-a01e-b3008cb8ef3e
[2m2026-02-20T03:34:50.062280Z[0m [34mDEBUG[0m [2mrust_file_backend::services::file_service[0m[2m:[0m Saving new metadata for storage_file_id: a52b4515-b0e8-47c6-9002-67fd3fd62ca8
[2m2026-02-20T03:34:50.064776Z[0m [32m INFO[0m [2mrust_file_backend::services::facts_service[0m[2m:[0m ≡ƒôè Updating file facts for user: 74922d22-4081-48c8-9d11-0a1cdf47bca9
[2m2026-02-20T03:34:50.065430Z[0m [32m INFO[0m [2mrust_file_backend::services::facts_service[0m[2m:[0m ≡ƒôè User 74922d22-4081-48c8-9d11-0a1cdf47bca9 facts: total_files=1, size=24, img=0, vid=0, doc=1
[2m2026-02-20T03:34:50.066220Z[0m [32m INFO[0m [2mrust_file_backend::services::facts_service[0m[2m:[0m Γ£à Facts updated for user 74922d22-4081-48c8-9d11-0a1cdf47bca9
[2m2026-02-20T03:34:50.069192Z[0m [32m INFO[0m [2mrust_file_backend::api::handlers::files[0m[2m:[0m ≡ƒôÄ Presigned redirect for file_id=03f5a91e-bbbd-4de1-8d60-f8e05ed37b15 user=74922d22-4081-48c8-9d11-0a1cdf47bca9
[2m2026-02-20T03:34:50.070243Z[0m [32m INFO[0m [2mrust_file_backend::services::storage_lifecycle[0m[2m:[0m Soft deleting user_file: 03f5a91e-bbbd-4de1-8d60-f8e05ed37b15
[2m2026-02-20T03:34:50.070768Z[0m [32m INFO[0m [2mrust_file_backend::services::storage_lifecycle[0m[2m:[0m Decrementing ref_count for storage_file a52b4515-b0e8-47c6-9002-67fd3fd62ca8 from 1 to 0
[2m2026-02-20T03:34:50.071016Z[0m [32m INFO[0m [2mrust_file_backend::services::storage_lifecycle[0m[2m:[0m ref_count reached 0, deleting from S3: 03b37cadae2fa5880328a5a50bfe3482dac3b49603c05764d9eb0be5269ac66e/api_test.txt
[2m2026-02-20T03:34:50.071229Z[0m [32m INFO[0m [2mrust_file_backend::services::storage_lifecycle[0m[2m:[0m Successfully deleted storage_file a52b4515-b0e8-47c6-9002-67fd3fd62ca8 from S3 and DB
[2m2026-02-20T03:34:50.071443Z[0m [32m INFO[0m [2mrust_file_backend::services::facts_service[0m[2m:[0m ≡ƒôè Updating file facts for user: 74922d22-4081-48c8-9d11-0a1cdf47bca9
test test_full_api_flow ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.12s

